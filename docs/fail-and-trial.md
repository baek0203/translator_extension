# Fail and Trial - DragTranslator ê°œë°œ ê¸°ë¡

ì´ ë¬¸ì„œëŠ” DragTranslator Chrome í™•ì¥ í”„ë¡œê·¸ë¨ ê°œë°œ ì¤‘ ê²ªì—ˆë˜ ë¬¸ì œë“¤ê³¼ í•´ê²° ê³¼ì •ì„ ê¸°ë¡í•©ë‹ˆë‹¤.

## ëª©ì°¨
1. [Privacy Policy ëˆ„ë½ ë¬¸ì œ](#1-privacy-policy-ëˆ„ë½-ë¬¸ì œ)
2. [Git Push ì¶©ëŒ](#2-git-push-ì¶©ëŒ)
3. [ìƒˆ í˜ì´ì§€ì—ì„œ ë²ˆì—­ ë¯¸ì‘ë™](#3-ìƒˆ-í˜ì´ì§€ì—ì„œ-ë²ˆì—­-ë¯¸ì‘ë™)
4. [Invisible Character ì—ëŸ¬](#4-invisible-character-ì—ëŸ¬)
5. [ë¸Œë¼ìš°ì € ìºì‹± ë¬¸ì œ](#5-ë¸Œë¼ìš°ì €-ìºì‹±-ë¬¸ì œ)
6. [ë²ˆì—­ ì†ë„ ëŠë¦¼](#6-ë²ˆì—­-ì†ë„-ëŠë¦¼)
7. [ì¬ì‹œë„ ë¡œì§ ë¶€ì¬](#7-ì¬ì‹œë„-ë¡œì§-ë¶€ì¬)
8. [Extension Context Invalidated](#8-extension-context-invalidated)
9. [ë²ˆì—­ ê²°ê³¼ ë¯¸í‘œì‹œ ë¬¸ì œ](#9-ë²ˆì—­-ê²°ê³¼-ë¯¸í‘œì‹œ-ë¬¸ì œ)
10. [SVG ëª¨ì„œë¦¬ ì§ê° í‘œì‹œ](#10-svg-ëª¨ì„œë¦¬-ì§ê°-í‘œì‹œ)
11. [ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê¶Œí•œ ì •ì±… ìœ„ë°˜](#11-ì‚¬ìš©í•˜ì§€-ì•ŠëŠ”-ê¶Œí•œ-ì •ì±…-ìœ„ë°˜)
12. [íŒì—…ì´ ìŠ¤í¬ë¡¤ì„ ë”°ë¼ê°€ì§€ ì•ŠìŒ](#12-íŒì—…ì´-ìŠ¤í¬ë¡¤ì„-ë”°ë¼ê°€ì§€-ì•ŠìŒ)
13. [íŒì—… ìœ„ì¹˜ ê³ ì • ë¶ˆê°€](#13-íŒì—…-ìœ„ì¹˜-ê³ ì •-ë¶ˆê°€)

---

## 1. Privacy Policy ëˆ„ë½ ë¬¸ì œ

### ë¬¸ì œ
Chrome Web Storeì— ì œì¶œ ì‹œ ê±°ì ˆë‹¹í•¨:
```
ì •ì • ë°©ë²•: ë§í¬ê°€ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ í˜ì´ì§€ì— ë°”ë¡œ ì—°ê²°ë˜ë„ë¡ í•©ë‹ˆë‹¤
```

### ì›ì¸
- Chrome Web StoreëŠ” ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ëª¨ë“  í™•ì¥ í”„ë¡œê·¸ë¨ì— ëŒ€í•´ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ì„ ìš”êµ¬í•¨
- ë²ˆì—­ ê¸°ë¡ì„ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ë¯€ë¡œ ì •ì±… í•„ìš”

### í•´ê²°
1. `privacy-policy.md` íŒŒì¼ ìƒì„±
2. ë‹¤ìŒ ë‚´ìš© í¬í•¨:
   - ë°ì´í„° ìˆ˜ì§‘ í•­ëª© (ë²ˆì—­ ê¸°ë¡, ì‚¬ìš©ì ì„¤ì •)
   - ë°ì´í„° ì €ì¥ ìœ„ì¹˜ (ë¡œì»¬ ë¸Œë¼ìš°ì €)
   - ì œ3ì ì„œë¹„ìŠ¤ (Google Translate API)
   - ì‚¬ìš©ì ê¶Œë¦¬ (ì ‘ê·¼, ì‚­ì œ, ë‚´ë³´ë‚´ê¸°)
   - ê¶Œí•œ ì„¤ëª…
3. GitHub Pagesë¡œ í˜¸ìŠ¤íŒ… ì˜ˆì •: `https://baek0203.github.io/DragTranslator/privacy-policy`

### êµí›ˆ
- Chrome Web Store ì œì¶œ ì „ì— ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ì„ ë°˜ë“œì‹œ ì¤€ë¹„í•´ì•¼ í•¨
- ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë§Œ ì‚¬ìš©í•´ë„ ì •ì±…ì´ í•„ìš”í•¨

---

## 2. Git Push ì¶©ëŒ

### ë¬¸ì œ
```bash
! [rejected] main -> main (fetch first)
error: failed to push some refs
```

### ì›ì¸
- ì›ê²© ì €ì¥ì†Œì— ë¡œì»¬ì— ì—†ëŠ” ì»¤ë°‹ì´ ì¡´ì¬í•¨
- ì—¬ëŸ¬ í™˜ê²½ì—ì„œ ì‘ì—…í•˜ê±°ë‚˜ ì›¹ì—ì„œ ì§ì ‘ ìˆ˜ì •í•œ ê²½ìš° ë°œìƒ

### í•´ê²°
```bash
git pull origin main --rebase
git push origin main
```

### êµí›ˆ
- Push ì „ì— í•­ìƒ ì›ê²© ì €ì¥ì†Œì˜ ë³€ê²½ì‚¬í•­ì„ í™•ì¸
- `--rebase` ì˜µì…˜ìœ¼ë¡œ ê¹”ë”í•œ ì»¤ë°‹ íˆìŠ¤í† ë¦¬ ìœ ì§€

---

## 3. ìƒˆ í˜ì´ì§€ì—ì„œ ë²ˆì—­ ë¯¸ì‘ë™

### ë¬¸ì œ
- ì‚¬ì´íŠ¸ì— ì²˜ìŒ ì ‘ì†í•˜ë©´ ë²ˆì—­ ë²„íŠ¼ í´ë¦­ ì‹œ "ë²ˆì—­ì¤‘..." ìƒíƒœì—ì„œ ë¬´í•œëŒ€ë¡œ ë©ˆì¶¤
- F5ë¡œ ìƒˆë¡œê³ ì¹¨ í›„ì—ì•¼ ë²ˆì—­ ê°€ëŠ¥

### ì‹œë„í•œ í•´ê²°ì±…ë“¤

#### ì‹œë„ 1: manifest.json ìˆ˜ì • (ì‹¤íŒ¨)
```json
// document_end â†’ document_idle ë³€ê²½
"run_at": "document_idle"
```
**ê²°ê³¼**: ì˜¤íˆë ¤ ì•„ì˜ˆ ì‘ë™í•˜ì§€ ì•Šê²Œ ë¨

#### ì‹œë„ 2: chrome.tabs.onUpdated ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ (ì‹¤íŒ¨)
```javascript
chrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {
  if (changeInfo.status === 'complete') {
    // content script ì¬ì£¼ì… ì‹œë„
  }
});
```
**ê²°ê³¼**: ìŠ¤í¬ë¦½íŠ¸ ì¤‘ë³µ ì£¼ì…ìœ¼ë¡œ ì¶©ëŒ ë°œìƒ

#### ì‹œë„ 3: IIFE ë˜í¼ ì¶”ê°€ (ì‹¤íŒ¨)
```javascript
(function() {
  if (window.__translatorInjected) return;
  window.__translatorInjected = true;
  // ... content script code
})();
```
**ê²°ê³¼**: ìŠ¤ì½”í”„ ë¬¸ì œë¡œ í•¨ìˆ˜ë“¤ì´ ì •ìƒ ì‘ë™í•˜ì§€ ì•ŠìŒ

### ìµœì¢… í•´ê²°
```json
// manifest.json - ì›ë˜ëŒ€ë¡œ ë˜ëŒë¦¼
"run_at": "document_end"
```

```javascript
// content.js - ë‹¨ìˆœí•œ ì¤‘ë³µ ë°©ì§€
if (window.__translatorInitialized) {
  console.log('Translator already initialized, skipping...');
} else {
  window.__translatorInitialized = true;
  // ... rest of code
}
```

### ì‹¤ì œ ì›ì¸
ìƒˆ í˜ì´ì§€ ë¬¸ì œê°€ ì•„ë‹ˆë¼ **Extension Context Invalidated** ë¬¸ì œì˜€ìŒ (ì•„ë˜ ì°¸ì¡°)

### êµí›ˆ
- ë³µì¡í•œ í•´ê²°ì±…ë³´ë‹¤ ë‹¨ìˆœí•œ ë°©ë²•ì´ ë” íš¨ê³¼ì ì¼ ìˆ˜ ìˆìŒ
- ë¬¸ì œì˜ ê·¼ë³¸ ì›ì¸ì„ ë¨¼ì € íŒŒì•…í•´ì•¼ í•¨

---

## 4. Invisible Character ì—ëŸ¬

### ë¬¸ì œ
```
Uncaught ReferenceError: ã…£ is not defined
```

### ì›ì¸
- background.js íŒŒì¼ ì²« ì¤„ì— ë³´ì´ì§€ ì•ŠëŠ” í•œê¸€ ìëª¨ ë¬¸ìê°€ ì‚½ì…ë¨
- ë¦°í„°ë‚˜ ì—ë””í„°ê°€ ì˜ë„ì¹˜ ì•Šê²Œ ì¶”ê°€í•œ ê²ƒìœ¼ë¡œ ì¶”ì •

### í•´ê²°
```bash
sed '1d' background.js > temp && mv temp background.js
```

ë˜ëŠ” ì—ë””í„°ì—ì„œ ì²« ì¤„ì„ ì‚­ì œí•˜ê³  ì €ì¥

### êµí›ˆ
- ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ ë°œìƒ ì‹œ íŒŒì¼ì˜ ë³´ì´ì§€ ì•ŠëŠ” ë¬¸ì í™•ì¸ í•„ìš”
- `cat -A` ë˜ëŠ” `hexdump`ë¡œ ìˆ¨ê²¨ì§„ ë¬¸ì í™•ì¸ ê°€ëŠ¥

---

## 5. ë¸Œë¼ìš°ì € ìºì‹± ë¬¸ì œ

### ë¬¸ì œ
- ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê³  í™•ì¥ í”„ë¡œê·¸ë¨ì„ ë‹¤ì‹œ ë¡œë“œí•´ë„ ë³€ê²½ì‚¬í•­ì´ ë°˜ì˜ë˜ì§€ ì•ŠìŒ
- "ê³„ì† ë˜‘ê°™ìŒ" - ê°™ì€ ì—ëŸ¬ê°€ ê³„ì† ë°œìƒ

### ì›ì¸
- Chromeì´ í™•ì¥ í”„ë¡œê·¸ë¨ íŒŒì¼ì„ ìºì‹œí•¨
- Service Workerê°€ ì´ì „ ë²„ì „ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê³„ì† ì‚¬ìš©

### í•´ê²°
1. Chrome í™•ì¥ í”„ë¡œê·¸ë¨ í˜ì´ì§€(`chrome://extensions`)ì—ì„œ í™•ì¥ í”„ë¡œê·¸ë¨ ì œê±°
2. Chrome ë¸Œë¼ìš°ì € ì™„ì „ ì¢…ë£Œ
3. Chrome ì¬ì‹œì‘
4. í™•ì¥ í”„ë¡œê·¸ë¨ ìƒˆë¡œ ì„¤ì¹˜

### ê°œë°œ ì¤‘ ì„ì‹œ í•´ê²°ì±…
- ê° í…ŒìŠ¤íŠ¸ í˜ì´ì§€ë¥¼ F5ë¡œ ìƒˆë¡œê³ ì¹¨
- Service Workerë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì¬ì‹œì‘ (í™•ì¥ í”„ë¡œê·¸ë¨ í˜ì´ì§€ì˜ "Service Worker" ë§í¬ í´ë¦­)

### êµí›ˆ
- í™•ì¥ í”„ë¡œê·¸ë¨ ê°œë°œ ì‹œ ìºì‹±ì€ í•­ìƒ ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŒ
- ë³€ê²½ì‚¬í•­ì´ ë°˜ì˜ë˜ì§€ ì•Šìœ¼ë©´ ì™„ì „íˆ ì¬ì„¤ì¹˜ ê³ ë ¤

---

## 6. ë²ˆì—­ ì†ë„ ëŠë¦¼

### ë¬¸ì œ
- "ë²ˆì—­í•˜ëŠ”ë° ì‹œê°„ì´ ì¡°ê¸ˆ ê±¸ë¦¼"
- ì‚¬ìš©ìê°€ ë²ˆì—­ ë²„íŠ¼ í´ë¦­ í›„ ëª‡ ì´ˆê°„ ëŒ€ê¸°í•´ì•¼ í•¨

### ì›ì¸
- ì—¬ëŸ¬ ë²ˆì—­ APIë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹œë„í•˜ëŠ” í´ë°± ë¡œì§:
  1. Google Translate (ì‹¤íŒ¨ ì‹œ)
  2. MyMemory API (ì‹¤íŒ¨ ì‹œ)
  3. LibreTranslate API

### í•´ê²°
```javascript
// background.js - í´ë°± API ì œê±°
// Google Translate APIë§Œ ì‚¬ìš©
async function translateText(text, targetLang, sourceLang = 'auto', retryCount = 2) {
  // Google Translateë§Œ í˜¸ì¶œ
  // íƒ€ì„ì•„ì›ƒ: 5ì´ˆ
  // ì¬ì‹œë„: ìµœëŒ€ 2íšŒ
}
```

**ì œê±°í•œ í•¨ìˆ˜ë“¤:**
- `translateWithMyMemory()`
- `translateWithLibre()`

### êµí›ˆ
- ê³¼ë„í•œ í´ë°± ë¡œì§ì€ ì„±ëŠ¥ì„ ì €í•˜ì‹œí‚´
- ì£¼ API(Google Translate)ê°€ ì¶©ë¶„íˆ ì•ˆì •ì ì´ë©´ í´ë°± ë¶ˆí•„ìš”
- ì¬ì‹œë„ ë¡œì§ìœ¼ë¡œ ì¶©ë¶„íˆ ì•ˆì •ì„± í™•ë³´ ê°€ëŠ¥

---

## 7. ì¬ì‹œë„ ë¡œì§ ë¶€ì¬

### ë¬¸ì œ
- ë„¤íŠ¸ì›Œí¬ ì¼ì‹œì  ì˜¤ë¥˜ë¡œ ë²ˆì—­ì´ ì‹¤íŒ¨í•˜ë©´ ì¬ì‹œë„ ì—†ì´ ë°”ë¡œ ì‹¤íŒ¨
- "ì™œ ì•ˆë ê¹Œ. ë³´ë‹ˆê¹Œ ê³„ì† ì‹œë„í•´ì•¼í•  ê²ƒ ê°™ì€ë°? í•œë²ˆë§Œ í•´ì„œ ë¬¸ì œê°€ ë˜ëŠ”ê±° ì•„ë‹ˆì•¼?"

### í•´ê²°
```javascript
async function translateText(text, targetLang, sourceLang = 'auto', retryCount = 2) {
  for (let attempt = 1; attempt <= retryCount; attempt++) {
    try {
      // 5ì´ˆ íƒ€ì„ì•„ì›ƒ
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), 5000);

      const response = await fetch(url, { signal: controller.signal });
      clearTimeout(timeoutId);

      // ì„±ê³µí•˜ë©´ ë°”ë¡œ ë°˜í™˜
      return { success: true, translatedText: ... };
    } catch (error) {
      console.error(`Translation attempt ${attempt} failed:`, error);

      // ë§ˆì§€ë§‰ ì‹œë„ê°€ ì•„ë‹ˆë©´ ì¬ì‹œë„
      if (attempt < retryCount) {
        await new Promise(resolve => setTimeout(resolve, 300)); // 0.3ì´ˆ ëŒ€ê¸°
        continue;
      }

      // ëª¨ë‘ ì‹¤íŒ¨
      return { success: false, error: error.message };
    }
  }
}
```

**ì£¼ìš” ê°œì„ ì‚¬í•­:**
- ìµœëŒ€ 2íšŒ ì¬ì‹œë„ (ì´ 3ë²ˆ ì‹œë„)
- ê° ì‹œë„ë§ˆë‹¤ 5ì´ˆ íƒ€ì„ì•„ì›ƒ
- ì¬ì‹œë„ ì‚¬ì´ 0.3ì´ˆ ëŒ€ê¸°
- User-Agent í—¤ë” ì¶”ê°€

### êµí›ˆ
- ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì€ í•­ìƒ ì¬ì‹œë„ ë¡œì§ì„ í¬í•¨í•´ì•¼ í•¨
- ì ì ˆí•œ íƒ€ì„ì•„ì›ƒê³¼ ì¬ì‹œë„ ê°„ê²©ì´ ì¤‘ìš”í•¨

---

## 8. Extension Context Invalidated

### ë¬¸ì œ
```
Uncaught (in promise) Error: Extension context invalidated
```

ì½˜ì†”ì— ë°˜ë³µì ìœ¼ë¡œ í‘œì‹œë˜ë©° ë²ˆì—­ì´ ì „í˜€ ì‘ë™í•˜ì§€ ì•ŠìŒ.

### ì›ì¸
- ê°œë°œ ì¤‘ í™•ì¥ í”„ë¡œê·¸ë¨ì„ ë‹¤ì‹œ ë¡œë“œí•  ë•Œ ë°œìƒ
- ì´ì „ì— ì£¼ì…ëœ content scriptë“¤ì´ í˜ì´ì§€ì— ë‚¨ì•„ìˆìŒ
- ì˜¤ë˜ëœ content scriptê°€ ìƒˆë¡œìš´ background service workerì™€ í†µì‹  ì‹œë„
- `chrome.runtime.id`ê°€ ìœ íš¨í•˜ì§€ ì•Šì•„ ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨

### í•´ê²°ì±…

#### 1. ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€
```javascript
// content.js
if (window.__translatorInitialized) {
  console.log('Translator already initialized, skipping...');
} else {
  window.__translatorInitialized = true;
  console.log('Initializing translator...');
  // ... rest of code
}
```

#### 2. Context ìœ íš¨ì„± ê²€ì‚¬
```javascript
async function translate(text) {
  // chrome.runtimeì´ ìœ íš¨í•œì§€ í™•ì¸
  if (!chrome.runtime || !chrome.runtime.id) {
    throw new Error('Extension context invalidated');
  }
  // ... ë²ˆì—­ ë¡œì§
}

async function showPopup() {
  if (!chrome.runtime || !chrome.runtime.id) {
    console.error('Extension context invalidated');
    return;
  }
  // ... íŒì—… ë¡œì§
}
```

#### 3. ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€
```javascript
catch (error) {
  if (error.message && error.message.includes('Extension context invalidated')) {
    el.textContent = 'Please reload the page (F5)';
  }
}
```

### ê°œë°œ ì¤‘ í•´ê²° ë°©ë²•
1. í™•ì¥ í”„ë¡œê·¸ë¨ì„ ë‹¤ì‹œ ë¡œë“œí•œ í›„
2. **ë°˜ë“œì‹œ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ë¥¼ F5ë¡œ ìƒˆë¡œê³ ì¹¨**
3. ê·¸ëŸ¬ë©´ ìƒˆë¡œìš´ content scriptê°€ ë¡œë“œë˜ì–´ ì •ìƒ ì‘ë™

### í”„ë¡œë•ì…˜ í™˜ê²½
- ì‚¬ìš©ìëŠ” í™•ì¥ í”„ë¡œê·¸ë¨ì„ ìì£¼ ë‹¤ì‹œ ë¡œë“œí•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì´ ë¬¸ì œ ë°œìƒ ë¹ˆë„ ë‚®ìŒ
- ë§Œì•½ ë°œìƒí•˜ë©´ ì‚¬ìš©ìì—ê²Œ "Please reload the page (F5)" ë©”ì‹œì§€ í‘œì‹œ

### êµí›ˆ
- Chrome í™•ì¥ í”„ë¡œê·¸ë¨ ê°œë°œ ì‹œ context invalidationì€ í”í•œ ë¬¸ì œ
- ê°œë°œ í™˜ê²½ê³¼ í”„ë¡œë•ì…˜ í™˜ê²½ì˜ ì°¨ì´ë¥¼ ì´í•´í•´ì•¼ í•¨
- í•­ìƒ `chrome.runtime.id` ìœ íš¨ì„±ì„ ê²€ì‚¬í•´ì•¼ í•¨

---

## 9. ë²ˆì—­ ê²°ê³¼ ë¯¸í‘œì‹œ ë¬¸ì œ

### ë¬¸ì œ
- ì½˜ì†” ë¡œê·¸ì—ëŠ” "Translation successful: [ë²ˆì—­ëœ í…ìŠ¤íŠ¸]"ê°€ ë‚˜íƒ€ë‚¨
- í•˜ì§€ë§Œ íŒì—…ì—ëŠ” "ë²ˆì—­ì¤‘..." ìƒíƒœë¡œ ê³„ì† í‘œì‹œë¨
- ë²ˆì—­ì€ ì„±ê³µí–ˆì§€ë§Œ UIê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ

### ë””ë²„ê¹… ê³¼ì •
```javascript
// ë¡œê·¸ í™•ì¸
console.log('Popup displayed successfully');
console.log('Translation response:', res);
console.log('Translation successful: Document Understanding - DocLayNet YOLO');
```

ëª¨ë“  ë¡œê·¸ê°€ ì •ìƒì ìœ¼ë¡œ ì¶œë ¥ë˜ì§€ë§Œ í™”ë©´ì€ ë³€í•˜ì§€ ì•ŠìŒ.

### ì›ì¸
```javascript
// ì˜ëª»ëœ ë°©ë²•
const el = document.getElementById('translated-text');
```

`document.getElementById`ëŠ” ì „ì²´ ë¬¸ì„œì—ì„œ ìš”ì†Œë¥¼ ì°¾ì§€ë§Œ, íŒì—…ì´ Shadow DOMì´ë‚˜ ë‹¤ë¥¸ ì»¨í…ìŠ¤íŠ¸ì— ìˆì„ ìˆ˜ ìˆìŒ.

### í•´ê²°
```javascript
// ì˜¬ë°”ë¥¸ ë°©ë²•
const el = translationPopup.querySelector('#translated-text');
```

íŒì—… ìš”ì†Œë¥¼ ì§ì ‘ ì°¸ì¡°í•˜ì—¬ ë‚´ë¶€ì˜ ìš”ì†Œë¥¼ ì¿¼ë¦¬.

### ì¶”ê°€ ê°œì„ 
```javascript
async function translate(text) {
  console.log('Starting translation for:', text.substring(0, 50));

  // translationPopup ì¡´ì¬ í™•ì¸
  if (!translationPopup) {
    console.error('Translation popup not found');
    return;
  }

  // íŒì—… ë‚´ë¶€ì—ì„œ ì§ì ‘ ì¿¼ë¦¬
  const el = translationPopup.querySelector('#translated-text');
  if (!el) {
    console.error('Translation element not found in popup');
    console.log('Popup HTML:', translationPopup.innerHTML);
    return;
  }

  console.log('Translation element found:', el);
  // ... ë²ˆì—­ ë¡œì§
  console.log('Setting translated text:', translatedText);
  el.textContent = translatedText;
  console.log('Translation successful, element updated:', el.textContent);
}
```

### êµí›ˆ
- DOM ìš”ì†Œ ì°¸ì¡° ì‹œ ì»¨í…ìŠ¤íŠ¸ê°€ ì¤‘ìš”í•¨
- `document.getElementById` vs `element.querySelector` ì°¨ì´ ì´í•´ í•„ìš”
- ì¶©ë¶„í•œ ë¡œê¹…ìœ¼ë¡œ ì •í™•í•œ ë¬¸ì œ ìœ„ì¹˜ íŒŒì•…

---

## 10. SVG ëª¨ì„œë¦¬ ì§ê° í‘œì‹œ

### ë¬¸ì œ
- ë²ˆì—­ ë²„íŠ¼ì˜ ëª¨ì„œë¦¬ê°€ ë‘¥ê¸€ê²Œ í‘œì‹œë˜ì–´ì•¼ í•˜ëŠ”ë° ì§ê° ë„¤ëª¨ë¡œ í‘œì‹œë¨
- CSSì—ëŠ” `border-radius: 8px`ê°€ ì„¤ì •ë˜ì–´ ìˆìŒ

### ì›ì¸
```javascript
// SVGì— í°ìƒ‰ ë°°ê²½ rectê°€ ìˆì—ˆìŒ
btn.innerHTML = `
  <svg viewBox="0 0 24 24">
    <rect width="24" height="24" fill="#FFFFFF" rx="4"/>  // ì´ ë¶€ë¶„
    <path d="..." fill="#4285F4"/>
  </svg>
`;
```

SVG ë‚´ë¶€ì˜ `<rect>` ìš”ì†Œê°€ ìì²´ `rx="4"` ì†ì„±ì„ ê°€ì§€ê³  ìˆì–´ì„œ CSSì˜ `border-radius`ê°€ ì œëŒ€ë¡œ ì ìš©ë˜ì§€ ì•ŠìŒ.

### í•´ê²°
```javascript
// rect ì œê±°, pathë§Œ ë‚¨ê¹€
btn.innerHTML = `
  <svg viewBox="0 0 24 24">
    <path d="..." fill="#4285F4"/>
  </svg>
`;
```

CSSì˜ `border-radius`ì™€ `background: #ffffff`ë¡œ ë²„íŠ¼ ì»¨í…Œì´ë„ˆì— ìŠ¤íƒ€ì¼ ì ìš©.

### ì¶”ê°€ ê°œì„ : ëª¨ë“  URL ì§€ì›
```json
// manifest.json
"host_permissions": [
  "<all_urls>"  // ëª¨ë“  ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì‘ë™
]
```

### êµí›ˆ
- SVG ë‚´ë¶€ ìš”ì†Œì˜ ìŠ¤íƒ€ì¼ì´ ì™¸ë¶€ CSSë¥¼ ì˜¤ë²„ë¼ì´ë“œí•  ìˆ˜ ìˆìŒ
- ë¶ˆí•„ìš”í•œ SVG ìš”ì†ŒëŠ” ì œê±°í•˜ê³  CSSë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ë” ìœ ì—°í•¨
- í™•ì¥ í”„ë¡œê·¸ë¨ì€ ê°€ëŠ¥í•œ í•œ ë„“ì€ ë²”ìœ„ì—ì„œ ì‘ë™í•˜ë„ë¡ ê¶Œí•œ ì„¤ì •

---

## ì „ì²´ ê°œë°œ íƒ€ì„ë¼ì¸

1. **ì´ˆê¸° ë¬¸ì œ**: Privacy Policy ëˆ„ë½ â†’ í•´ê²°
2. **Git ë¬¸ì œ**: Push ì¶©ëŒ â†’ Rebaseë¡œ í•´ê²°
3. **í•µì‹¬ ë¬¸ì œ ë°œê²¬**: Extension Context Invalidated
4. **ì˜ëª»ëœ ì§„ë‹¨**: "ìƒˆ í˜ì´ì§€ì—ì„œ ì‘ë™ ì•ˆ í•¨"ìœ¼ë¡œ ì˜¤í•´
5. **ì‹œí–‰ì°©ì˜¤**: document_idle, chrome.tabs.onUpdated, IIFE ë“± ì‹œë„ â†’ ëª¨ë‘ ì‹¤íŒ¨
6. **ì„±ëŠ¥ ë¬¸ì œ**: ëŠë¦° ë²ˆì—­ ì†ë„ â†’ í´ë°± API ì œê±°
7. **ì•ˆì •ì„± ê°œì„ **: ì¬ì‹œë„ ë¡œì§ ì¶”ê°€
8. **ê·¼ë³¸ ì›ì¸ í•´ê²°**: Context invalidation ì²˜ë¦¬
9. **UI ë¬¸ì œ**: ë²ˆì—­ ê²°ê³¼ ë¯¸í‘œì‹œ â†’ querySelectorë¡œ í•´ê²°
10. **ë””ìì¸ ë¬¸ì œ**: ë²„íŠ¼ ëª¨ì„œë¦¬ â†’ SVG ìˆ˜ì •
11. **ì •ì±… ìœ„ë°˜**: scripting ê¶Œí•œ ì œê±°
12. **UX ê°œì„ **: íŒì—… ìŠ¤í¬ë¡¤ ë”°ë¼ê°€ê¸° (position: fixed)
13. **ê³ ê¸‰ ê¸°ëŠ¥**: íŒì—… ë“œë˜ê·¸ ì•¤ ë“œë¡­ êµ¬í˜„

---

## ì£¼ìš” êµí›ˆ

### 1. ë¬¸ì œ ì§„ë‹¨ì˜ ì¤‘ìš”ì„±
- "ìƒˆ í˜ì´ì§€ì—ì„œ ì‘ë™ ì•ˆ í•¨"ì€ ì¦ìƒì¼ ë¿, ì›ì¸ì€ "Extension Context Invalidated"ì˜€ìŒ
- ê·¼ë³¸ ì›ì¸ì„ íŒŒì•…í•˜ì§€ ì•Šê³  ì¦ìƒë§Œ ë³´ê³  í•´ê²°í•˜ë ¤ë‹¤ ì‹œê°„ ë‚­ë¹„

### 2. ë‹¨ìˆœí•¨ì˜ ê°€ì¹˜
- ë³µì¡í•œ IIFE, ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ ë“±ì˜ ì‹œë„ë³´ë‹¤ ë‹¨ìˆœí•œ ì¤‘ë³µ ë°©ì§€ í”Œë˜ê·¸ê°€ ë” íš¨ê³¼ì 
- í´ë°± API ì—¬ëŸ¬ ê°œë³´ë‹¤ ì¬ì‹œë„ ë¡œì§ì´ ë” ë‚˜ìŒ

### 3. Chrome í™•ì¥ í”„ë¡œê·¸ë¨ íŠ¹ì„± ì´í•´
- Context invalidationì€ ê°œë°œ ì¤‘ì—ë§Œ ìì£¼ ë°œìƒ
- ë¸Œë¼ìš°ì € ìºì‹± ë¬¸ì œ
- Content script vs Background script ìƒëª…ì£¼ê¸°

### 4. ë””ë²„ê¹… ê¸°ë²•
- ì¶©ë¶„í•œ console.log ì‚¬ìš©
- ê° ë‹¨ê³„ë³„ í™•ì¸
- ê°€ì •í•˜ì§€ ë§ê³  í™•ì¸í•˜ê¸°

### 5. ì‚¬ìš©ì ê²½í—˜
- ì—ëŸ¬ ë©”ì‹œì§€ëŠ” ì‚¬ìš©ì ì¹œí™”ì ìœ¼ë¡œ
- "Extension context invalidated" (X)
- "Please reload the page (F5)" (O)

### 6. CSS Position ì†ì„±ì˜ ì¤‘ìš”ì„±
- `absolute` vs `fixed` ì„ íƒì´ ì‚¬ìš©ì ê²½í—˜ì„ í¬ê²Œ ì¢Œìš°
- `fixed`ëŠ” viewport ê¸°ì¤€ì´ë¯€ë¡œ ìŠ¤í¬ë¡¤ì— ì˜í–¥ë°›ì§€ ì•ŠìŒ
- UI ìš”ì†Œê°€ í™”ë©´ì— ê³ ì •ë˜ì–´ì•¼ í•˜ëŠ”ì§€ ë¬¸ì„œì— ê³ ì •ë˜ì–´ì•¼ í•˜ëŠ”ì§€ ëª…í™•íˆ

### 7. ì‚¬ìš©ìì—ê²Œ ì œì–´ê¶Œ ì£¼ê¸°
- ìë™í™”ì™€ ìˆ˜ë™ ì œì–´ì˜ ê· í˜•
- ê¸°ë³¸ ë™ì‘ì€ í¸ë¦¬í•˜ê²Œ, ê³ ê¸‰ ì˜µì…˜ë„ ì œê³µ
- ë“œë˜ê·¸ ì•¤ ë“œë¡­ì€ ì§ê´€ì ì´ê³  ê°•ë ¥í•œ UI íŒ¨í„´
- ìƒíƒœ í”Œë˜ê·¸ë¡œ ëª¨ë“œ ì „í™˜ êµ¬í˜„

---

## ë‚¨ì€ ê°œì„  ì‚¬í•­

### ë‹¨ê¸°
- [x] íŒì—… ìŠ¤í¬ë¡¤ ë”°ë¼ê°€ê¸° êµ¬í˜„
- [x] íŒì—… ë“œë˜ê·¸ ì•¤ ë“œë¡­ êµ¬í˜„
- [x] ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê¶Œí•œ ì œê±°
- [ ] ë””ë²„ê¹… ë¡œê·¸ ì œê±° ë˜ëŠ” production ë¹Œë“œ ì‹œ ì œê±°
- [ ] Privacy Policyë¥¼ GitHub Pagesì— í˜¸ìŠ¤íŒ…
- [ ] Chrome Web Storeì— ì¬ì œì¶œ

### ì¤‘ê¸°
- [ ] íŒì—… ìœ„ì¹˜ ê¸°ì–µí•˜ê¸° (localStorage)
- [ ] íŒì—… í¬ê¸° ì¡°ì ˆ ê°€ëŠ¥í•˜ê²Œ
- [ ] ë” ë§ì€ ì–¸ì–´ ì§€ì›
- [ ] ë²ˆì—­ íˆìŠ¤í† ë¦¬ ê²€ìƒ‰ ê¸°ëŠ¥
- [ ] ì»¤ìŠ¤í…€ ë‹¨ì¶•í‚¤ ì§€ì›

### ì¥ê¸°
- [ ] ì˜¤í”„ë¼ì¸ ë²ˆì—­ ì§€ì› ê²€í† 
- [ ] ë‹¤ë¥¸ ë²ˆì—­ API ì˜µì…˜ ì œê³µ (ì„¤ì •ì—ì„œ ì„ íƒ ê°€ëŠ¥)
- [ ] ìŒì„± ì¶œë ¥ ê¸°ëŠ¥
- [ ] ì‹¤ì‹œê°„ ë²ˆì—­ (íƒ€ì´í•‘í•˜ë©´ì„œ ë²ˆì—­)

---

## 11. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê¶Œí•œ ì •ì±… ìœ„ë°˜

### ë¬¸ì œ
Chrome Web Store ì œì¶œ ì‹œ ê±°ì ˆë‹¹í•¨:
```
ê¶Œí•œ ì‚¬ìš© ìœ„ë°˜ ì°¸ì¡° ID: Purple Potassium
ë‹¤ìŒ ê¶Œí•œì„ ìš”ì²­í•˜ì§€ë§Œ ì‚¬ìš©í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤(scripting).
```

### ì›ì¸
```json
// manifest.json
"permissions": [
  "storage",
  "activeTab",
  "scripting"  // ì´ ê¶Œí•œì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
]
```

`scripting` ê¶Œí•œì€ `chrome.scripting` APIë¥¼ ì‚¬ìš©í•  ë•Œ í•„ìš”í•œë°, ì‹¤ì œë¡œëŠ” `content_scripts`ë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì£¼ì…í•˜ê³  ìˆì—ˆìŒ.

### í•´ê²°
```json
// manifest.json - scripting ê¶Œí•œ ì œê±°
"permissions": [
  "storage",
  "activeTab"
]
```

### êµí›ˆ
- Chrome Web StoreëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê¶Œí•œì„ ë§¤ìš° ì—„ê²©í•˜ê²Œ ê²€ì‚¬í•¨
- `content_scripts`ë¡œ ìë™ ì£¼ì…í•˜ëŠ” ê²½ìš° `scripting` ê¶Œí•œ ë¶ˆí•„ìš”
- ê¶Œí•œì€ ìµœì†Œí•œìœ¼ë¡œë§Œ ìš”ì²­í•´ì•¼ í•¨
- ê° ê¶Œí•œì´ ì‹¤ì œë¡œ ì‚¬ìš©ë˜ëŠ”ì§€ í™•ì¸ í•„ìš”

**ê´€ë ¨ ì •ì±…:**
- [Chrome í™•ì¥ í”„ë¡œê·¸ë¨ ê¶Œí•œ](https://developer.chrome.com/docs/webstore/program-policies/permissions/)
- [ê³¼ë„í•œ ê¶Œí•œ ë¬¸ì œ í•´ê²°](https://developer.chrome.com/docs/webstore/troubleshooting?hl=ko#excessive-permissions)

---

## 12. íŒì—…ì´ ìŠ¤í¬ë¡¤ì„ ë”°ë¼ê°€ì§€ ì•ŠìŒ

### ë¬¸ì œ
ë²ˆì—­ íŒì—…ì´ ìŠ¤í¬ë¡¤í•´ë„ í™”ë©´ì— ê³ ì •ë˜ì§€ ì•Šê³  ì›ë˜ ìœ„ì¹˜ì— ë¨¸ë¬¼ëŸ¬ì„œ ì‚¬ìš©ìê°€ ìŠ¤í¬ë¡¤í•˜ë©´ íŒì—…ì´ ë³´ì´ì§€ ì•Šê²Œ ë¨.

**ì¦ìƒ:**
- íŒì—…ì´ ë‚˜íƒ€ë‚œ í›„ ìŠ¤í¬ë¡¤í•˜ë©´ íŒì—…ì´ í™”ë©´ ë°–ìœ¼ë¡œ ë²—ì–´ë‚¨
- ì„ íƒëœ í…ìŠ¤íŠ¸ì™€ íŒì—…ì˜ ìœ„ì¹˜ ê´€ê³„ê°€ ìœ ì§€ë˜ì§€ ì•ŠìŒ

### ì›ì¸
```css
/* styles.css */
.translator-popup {
  position: absolute;  /* ë¬¸ì„œ ê¸°ì¤€ ì ˆëŒ€ ìœ„ì¹˜ */
  z-index: 10001;
}
```

```javascript
// content.js - ìŠ¤í¬ë¡¤ ì˜¤í”„ì…‹ í¬í•¨
translationPopup.style.left = `${rect.left + window.scrollX}px`;
translationPopup.style.top = `${rect.bottom + window.scrollY + 10}px`;
```

`position: absolute`ëŠ” ë¬¸ì„œ ì „ì²´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìœ„ì¹˜ë¥¼ ì •í•˜ë¯€ë¡œ ìŠ¤í¬ë¡¤í•´ë„ íŒì—…ì´ ì›ë˜ ìë¦¬ì— ê³ ì •ë¨.

### í•´ê²°

#### 1. CSS ìˆ˜ì •
```css
/* styles.css */
.translator-popup {
  position: fixed;  /* viewport ê¸°ì¤€ìœ¼ë¡œ ë³€ê²½ */
  z-index: 10001;
}
```

#### 2. JavaScript ìˆ˜ì •
```javascript
// content.js - ìŠ¤í¬ë¡¤ ì˜¤í”„ì…‹ ì œê±°
translationPopup.style.left = `${rect.left}px`;
translationPopup.style.top = `${rect.bottom + 10}px`;
```

`position: fixed`ëŠ” viewport(í™”ë©´)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ë¯€ë¡œ `getBoundingClientRect()`ì˜ ê°’ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©.

### êµí›ˆ
- `position: absolute` vs `position: fixed` ì°¨ì´ ì´í•´ ì¤‘ìš”
- `absolute`: ë¬¸ì„œ ê¸°ì¤€, ìŠ¤í¬ë¡¤ ì‹œ í•¨ê»˜ ì´ë™
- `fixed`: viewport ê¸°ì¤€, ìŠ¤í¬ë¡¤í•´ë„ í™”ë©´ ìœ„ì¹˜ ìœ ì§€
- `getBoundingClientRect()`ëŠ” í•­ìƒ viewport ê¸°ì¤€ ì¢Œí‘œ ë°˜í™˜

---

## 13. íŒì—… ìœ„ì¹˜ ê³ ì • ë¶ˆê°€

### ë¬¸ì œ
íŒì—…ì´ ì„ íƒëœ í…ìŠ¤íŠ¸ë¥¼ ë”°ë¼ê°€ëŠ” ê²ƒì€ ì¢‹ì§€ë§Œ, ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ìœ„ì¹˜ì— íŒì—…ì„ ê³ ì •í•˜ê³  ì‹¶ì„ ë•Œ ë°©ë²•ì´ ì—†ìŒ.

**ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤:**
1. ê¸´ í…ìŠ¤íŠ¸ë¥¼ ë²ˆì—­í•˜ë©´ì„œ ìŠ¤í¬ë¡¤í•´ì„œ ì½ê³  ì‹¶ìŒ
2. í•˜ì§€ë§Œ íŒì—…ì´ í…ìŠ¤íŠ¸ë¥¼ ë”°ë¼ê°€ì„œ í™”ë©´ì„ ê°€ë¦¼
3. íŒì—…ì„ í™”ë©´ í•œìª½ êµ¬ì„ì— ë‘ê³  ì‹¶ìŒ

### í•´ê²° ê³¼ì •

#### ì‹œë„ 1: íŒì—…ì„ ìŠ¤í¬ë¡¤ ì‹œ ì„ íƒëœ í…ìŠ¤íŠ¸ ë”°ë¼ê°€ë„ë¡
```javascript
// ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ì—ì„œ íŒì—… ìœ„ì¹˜ ì—…ë°ì´íŠ¸
document.addEventListener('scroll', () => {
  if (translationPopup && translationPopup.style.display === 'block') {
    const sel = window.getSelection();
    if (sel && sel.rangeCount > 0) {
      const range = sel.getRangeAt(0);
      const rect = range.getBoundingClientRect();

      translationPopup.style.left = `${rect.left}px`;
      translationPopup.style.top = `${rect.bottom + 10}px`;
    }
  }
}, true);
```

**ë¬¸ì œ:** íŒì—…ì„ ì›í•˜ëŠ” ìœ„ì¹˜ì— ê³ ì •í•  ìˆ˜ ì—†ìŒ.

#### ìµœì¢… í•´ê²°: ë“œë˜ê·¸ ê°€ëŠ¥ + ì¡°ê±´ë¶€ ë”°ë¼ê°€ê¸°

**1. íŒì—… í—¤ë” ë“œë˜ê·¸ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê¸°:**

```javascript
// ë“œë˜ê·¸ ê´€ë ¨ ë³€ìˆ˜
let popupDragging = false;
let popupDragStartX = 0;
let popupDragStartY = 0;
let popupOffsetX = 0;
let popupOffsetY = 0;
let popupManuallyMoved = false; // í•µì‹¬: ìˆ˜ë™ ì´ë™ ì—¬ë¶€ ì¶”ì 

// í—¤ë”ì— ë§ˆìš°ìŠ¤ ë‹¤ìš´ ì´ë²¤íŠ¸
header.onmousedown = (e) => {
  if (e.target.classList.contains('close-x')) return;

  popupDragging = true;
  popupDragStartX = e.clientX;
  popupDragStartY = e.clientY;

  const rect = p.getBoundingClientRect();
  popupOffsetX = rect.left;
  popupOffsetY = rect.top;

  e.preventDefault();
};
```

**2. ë§ˆìš°ìŠ¤ ì´ë™ìœ¼ë¡œ íŒì—… ì´ë™:**

```javascript
document.addEventListener('mousemove', e => {
  if (!popupDragging || !translationPopup) return;

  const deltaX = e.clientX - popupDragStartX;
  const deltaY = e.clientY - popupDragStartY;

  const newLeft = popupOffsetX + deltaX;
  const newTop = popupOffsetY + deltaY;

  translationPopup.style.left = `${newLeft}px`;
  translationPopup.style.top = `${newTop}px`;
});

document.addEventListener('mouseup', () => {
  if (popupDragging) {
    popupDragging = false;
    popupManuallyMoved = true; // ìˆ˜ë™ ì´ë™í–ˆìŒì„ í‘œì‹œ
  }
});
```

**3. ì¡°ê±´ë¶€ ìŠ¤í¬ë¡¤ ë”°ë¼ê°€ê¸°:**

```javascript
document.addEventListener('scroll', () => {
  // íŒì—… ìœ„ì¹˜ ì¬ê³„ì‚° (ì‚¬ìš©ìê°€ ìˆ˜ë™ìœ¼ë¡œ ì´ë™í•˜ì§€ ì•Šì€ ê²½ìš°ë§Œ)
  if (translationPopup && translationPopup.style.display === 'block' && !popupManuallyMoved) {
    const sel = window.getSelection();
    if (sel && sel.rangeCount > 0) {
      const range = sel.getRangeAt(0);
      const rect = range.getBoundingClientRect();

      translationPopup.style.left = `${rect.left}px`;
      translationPopup.style.top = `${rect.bottom + 10}px`;
    }
  }
}, true);
```

**4. íŒì—… ë‹«ì„ ë•Œ í”Œë˜ê·¸ ì´ˆê¸°í™”:**

```javascript
function hidePopup() {
  if (translationPopup) {
    translationPopup.style.display = 'none';
    popupManuallyMoved = false; // ë‹¤ìŒì—ëŠ” ë‹¤ì‹œ ìë™ ë”°ë¼ê°€ê¸°
  }
}
```

**5. CSSë¡œ ì‹œê°ì  íŒíŠ¸:**

```css
.popup-header {
  cursor: move;  /* ë“œë˜ê·¸ ê°€ëŠ¥í•¨ì„ í‘œì‹œ */
  user-select: none;  /* ë“œë˜ê·¸ ì¤‘ í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€ */
}

.popup-header:active {
  cursor: grabbing;  /* ë“œë˜ê·¸ ì¤‘ */
}
```

### ìµœì¢… ë™ì‘

1. **ê¸°ë³¸ ë™ì‘**: íŒì—…ì´ ì„ íƒëœ í…ìŠ¤íŠ¸ë¥¼ ë”°ë¼ê° (ìŠ¤í¬ë¡¤í•´ë„)
2. **ìˆ˜ë™ ì´ë™**: í—¤ë”ë¥¼ ë“œë˜ê·¸í•˜ë©´ ê·¸ ìœ„ì¹˜ì— ê³ ì •
3. **ì¬ì‹œì‘**: íŒì—…ì„ ë‹«ê³  ë‹¤ì‹œ ì—´ë©´ ë‹¤ì‹œ ìë™ ë”°ë¼ê°€ê¸° ëª¨ë“œ

### êµí›ˆ
- ì‚¬ìš©ìì—ê²Œ ì„ íƒê¶Œì„ ì£¼ëŠ” ê²ƒì´ ì¤‘ìš”
- ê¸°ë³¸ ë™ì‘ì€ í¸ë¦¬í•˜ê²Œ (ìë™ ë”°ë¼ê°€ê¸°)
- ê³ ê¸‰ ì‚¬ìš©ìë¥¼ ìœ„í•œ ì˜µì…˜ ì œê³µ (ìˆ˜ë™ ìœ„ì¹˜ ì¡°ì •)
- ë“œë˜ê·¸ ì•¤ ë“œë¡­ì€ ì§ê´€ì ì¸ UI íŒ¨í„´
- ìƒíƒœ í”Œë˜ê·¸(`popupManuallyMoved`)ë¡œ ë‘ ê°€ì§€ ëª¨ë“œ ì „í™˜

---

## ì°¸ê³  ìë£Œ

- [Chrome Extension Manifest V3 ë¬¸ì„œ](https://developer.chrome.com/docs/extensions/mv3/)
- [Chrome Extension Context Invalidation](https://stackoverflow.com/questions/53939205/how-to-avoid-extension-context-invalidated-errors-when-messaging-after-an-exte)
- [Google Translate API ë¹„ê³µì‹ ì—”ë“œí¬ì¸íŠ¸](https://stackoverflow.com/questions/26714426/what-is-the-meaning-of-google-translate-query-params)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-01-12

---

## 14. ì–¸ì–´ ë¦¬ìŠ¤íŠ¸ ë¯¸í‘œì‹œ (ëª¨ë“ˆí™” ì´í›„)

### ë¬¸ì œ
ì„¤ì • í™”ë©´ì—ì„œ ì–¸ì–´ ë¦¬ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆê³ , ì½˜ì†”ì— ë‹¤ìŒ ì—ëŸ¬ê°€ ë°˜ë³µë¨:
```
[DragTranslator] Language list is not available.
```

### ì›ì¸
`i18n.js`ë¥¼ ëª¨ë“ˆí™”í•˜ë©´ì„œ ì „ì—­ìœ¼ë¡œ ë…¸ì¶œë˜ë˜ `LANGUAGES` ë°°ì—´ì´ ì‚¬ë¼ì§.  
`language-grid.js`ëŠ” ì „ì—­ `LANGUAGES`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë Œë”ë§í•˜ë¯€ë¡œ ë¹ˆ ëª©ë¡ìœ¼ë¡œ ì²˜ë¦¬ë¨.

### í•´ê²°
1) `src/shared/i18n.js`ì— `LANGUAGES` ë°°ì—´ ë³µêµ¬  
2) ì „ì—­ ë°”ì¸ë”©ì„ ëª…ì‹œì ìœ¼ë¡œ ë…¸ì¶œ (`globalThis.LANGUAGES`)  
3) `language-grid.js`ì—ì„œ `globalThis.LANGUAGES` í´ë°± ì¶”ê°€

```javascript
// src/shared/i18n.js
const LANGUAGES = [
  { code: 'ko', name: 'Korean', nativeName: 'í•œêµ­ì–´' },
  // ...
];

__dtRoot.LANGUAGES = LANGUAGES;
```

```javascript
// src/shared/language-grid.js
const languages = (typeof LANGUAGES !== 'undefined' && LANGUAGES)
  ? LANGUAGES
  : globalThis.LANGUAGES;
```

### êµí›ˆ
- ëª¨ë“ˆí™” í›„ì—ë„ ê¸°ì¡´ ì½”ë“œê°€ ì „ì—­ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ”ì§€ ë°˜ë“œì‹œ ì ê²€
- ê³µìš© ë°ì´í„°ëŠ” í•œ ê³³ì—ì„œ ì •ì˜í•˜ê³  ëª…ì‹œì ìœ¼ë¡œ export/ë…¸ì¶œí•˜ê¸°

## ë²„ì „ë³„ ì£¼ìš” ë³€ê²½ì‚¬í•­

### v1.4.3 (2026-01-12)
- âœ… íŒì—… positionì„ fixedë¡œ ë³€ê²½ (ìŠ¤í¬ë¡¤ ì‹œ í™”ë©´ ê³ ì •)
- âœ… íŒì—… í—¤ë” ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê¸°ëŠ¥ ì¶”ê°€
- âœ… ì¡°ê±´ë¶€ ìŠ¤í¬ë¡¤ ë”°ë¼ê°€ê¸° (ìˆ˜ë™ ì´ë™ ì‹œ ìœ„ì¹˜ ê³ ì •)
- âœ… scripting ê¶Œí•œ ì œê±° (ì •ì±… ìœ„ë°˜ í•´ê²°)

### v1.4.2 (2026-01-11)
- âœ… ë²ˆì—­ ê²°ê³¼ ë¯¸í‘œì‹œ ë¬¸ì œ í•´ê²°
- âœ… Extension context invalidated ì—ëŸ¬ ì²˜ë¦¬
- âœ… ì¬ì‹œë„ ë¡œì§ ì¶”ê°€ (2íšŒ)
- âœ… ë²„íŠ¼ ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ í‘œì‹œ
- âœ… ì„±ëŠ¥ ê°œì„  (í´ë°± API ì œê±°)

### v1.4.1 (2026-01-09)
- âœ… Privacy Policy ì¶”ê°€
- âœ… 10ê°œ ì–¸ì–´ ì§€ì›
- âœ… ë²ˆì—­ íˆìŠ¤í† ë¦¬ ê¸°ëŠ¥
- âœ… ì„¤ì • í˜ì´ì§€

### v1.6.0 (2026-01-20)
- âœ… ì´ë¦„ ë³€ê²½: DragTranslator â†’ Instant Translate
- âœ… ëŒ€ì‹œë³´ë“œ UI êµ¬í˜„ (íŒì—… ëŒ€ì‹  ì „ì²´ í˜ì´ì§€)
- âœ… ë‹¨ì–´ì¥ 2ì—´ ë ˆì´ì•„ì›ƒ (ë‹¨ì–´/ë¬¸ì¥ ë¶„ë¦¬)
- âœ… ë”¥ë§í¬ ê¸°ëŠ¥: ì €ì¥ëœ ë²ˆì—­ í´ë¦­ ì‹œ ì›ë³¸ í˜ì´ì§€ë¡œ ì´ë™ + í…ìŠ¤íŠ¸ í•˜ì´ë¼ì´íŠ¸ (Ctrl+F ìŠ¤íƒ€ì¼)
- âœ… ê¸€ê¼´ í¬ê¸° ì¡°ì ˆ: ë‹¨ì–´ì¥ í˜ì´ì§€ì—ì„œ -/M/+ ë²„íŠ¼ìœ¼ë¡œ ì¡°ì ˆ (S, M, L, XL)
- âœ… ì„¤ì • í˜ì´ì§€ Save/Cancel ë²„íŠ¼ ì¶”ê°€ (ìë™ì €ì¥ â†’ ëª…ì‹œì  ì €ì¥)
- âœ… ì „ì²´ì„ íƒ ê¸°ëŠ¥ ì¶”ê°€ (ëŒ€ëŸ‰ ì‚­ì œìš©)
- âœ… ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” íŒŒì¼ ì •ë¦¬: popup.html, settings.html, src/popup/, src/settings/
- âœ… 16ê°œ ì–¸ì–´ ì§€ì›
- âœ… ë²ˆì—­ íŒì—…ì—ì„œ ì§ì ‘ ì–¸ì–´ ì„ íƒ ê°€ëŠ¥ (ë“œë¡­ë‹¤ìš´)
- âœ… ë²ˆì—­ íŒì—… ë“œë˜ê·¸í•˜ì—¬ ìœ„ì¹˜ ì´ë™ ê°€ëŠ¥
- âœ… ë²ˆì—­ íŒì—… í…Œë§ˆê°€ ì„¤ì • í…Œë§ˆë¥¼ ë”°ë¼ê° (Light/Dark)
- âœ… Settingsì—ì„œ Translation ì„¹ì…˜ ì œê±° (íŒì—…ì—ì„œ ì§ì ‘ ì„ íƒ)
- âœ… Information íƒ­ì„ Settings ë‚´ë¡œ í†µí•©

---

## ê¸°ëŠ¥ ê°€ëŠ¥ì„± ë¶„ì„ (Feature Feasibility Analysis)

### ì´ë¯¸ì§€ OCR ë²ˆì—­ ê¸°ëŠ¥ (PaddleOCR)

**ìš”ì²­ ì‚¬í•­**: ì›¹í˜ì´ì§€ì—ì„œ ì´ë¯¸ì§€ ìš°í´ë¦­ â†’ "ì´ë¯¸ì§€ ë²ˆì—­" ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ë¡œ OCR í›„ ë²ˆì—­

#### ì‹¤í˜„ ê°€ëŠ¥ì„±: 70% (ë†’ìŒ)

##### ê¸°ìˆ  ìŠ¤íƒ ë¶„ì„

| í•­ëª© | ìƒíƒœ | ì„¤ëª… |
|------|------|------|
| ë¸Œë¼ìš°ì € OCR | âœ… ê°€ëŠ¥ | PaddleOCRì˜ ONNX ëª¨ë¸ì„ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ ê°€ëŠ¥ |
| JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬ | âœ… ì¡´ì¬ | [@gutenye/ocr-browser](https://github.com/gutenye/ocr), [paddleocr-browser](https://github.com/xulihang/paddleocr-browser) |
| Context Menu API | âœ… ê°€ëŠ¥ | Chrome Extensionì˜ `chrome.contextMenus` APIë¡œ ì´ë¯¸ì§€ ìš°í´ë¦­ ë©”ë‰´ ì¶”ê°€ ê°€ëŠ¥ |
| ë‹¤êµ­ì–´ ì§€ì› | âœ… ê°€ëŠ¥ | PaddleOCR PP-OCRv4ëŠ” 100+ ì–¸ì–´ ì§€ì› |

##### êµ¬í˜„ ë°©ì‹

```
1. manifest.jsonì— contextMenus ê¶Œí•œ ì¶”ê°€
2. ì´ë¯¸ì§€ ìš°í´ë¦­ ì‹œ "Translate Image" ë©”ë‰´ í‘œì‹œ
3. ì´ë¯¸ì§€ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (canvasë¡œ ë³€í™˜)
4. @gutenye/ocr-browserë¡œ OCR ìˆ˜í–‰
5. ì¶”ì¶œëœ í…ìŠ¤íŠ¸ë¥¼ ê¸°ì¡´ ë²ˆì—­ APIë¡œ ë²ˆì—­
6. ê²°ê³¼ë¥¼ íŒì—… ë˜ëŠ” ì˜¤ë²„ë ˆì´ë¡œ í‘œì‹œ
```

##### ì¥ì 
- 100% í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ (ì„œë²„ ë¶ˆí•„ìš”, í”„ë¼ì´ë²„ì‹œ ë³´ì¥)
- ê¸°ì¡´ ë²ˆì—­ ì‹œìŠ¤í…œê³¼ í†µí•© ìš©ì´
- ìœ ì‚¬ í™•ì¥ í”„ë¡œê·¸ë¨ ë‹¤ìˆ˜ ì¡´ì¬: [ImageTrans](https://github.com/xulihang/ImageTrans_chrome_extension), [Copyfish](https://github.com/A9T9/Copyfish)

##### ë‹¨ì  / ë„ì „ ê³¼ì œ
| í•­ëª© | ë‚œì´ë„ | ì„¤ëª… |
|------|--------|------|
| ëª¨ë¸ í¬ê¸° | ğŸŸ¡ ì¤‘ê°„ | ONNX ëª¨ë¸ íŒŒì¼ ~10-50MB, ìµœì´ˆ ë¡œë”© ì‹œê°„ í•„ìš” |
| ë©”ëª¨ë¦¬ ì‚¬ìš© | ğŸŸ¡ ì¤‘ê°„ | WebAssembly + ONNX Runtimeì€ ë©”ëª¨ë¦¬ ì†Œë¹„ê°€ í¼ |
| ì²˜ë¦¬ ì†ë„ | ğŸŸ¡ ì¤‘ê°„ | 300-1500ms (ì´ë¯¸ì§€ í¬ê¸°, ë””ë°”ì´ìŠ¤ì— ë”°ë¼ ë‹¤ë¦„) |
| CORS ì œí•œ | ğŸ”´ ë†’ìŒ | ì™¸ë¶€ ì´ë¯¸ì§€ëŠ” CORSë¡œ ì¸í•´ canvas ì ‘ê·¼ ì œí•œë  ìˆ˜ ìˆìŒ |
| ë³µì¡í•œ ë ˆì´ì•„ì›ƒ | ğŸŸ¡ ì¤‘ê°„ | ë§Œí™”, ë³µì¡í•œ ë°°ê²½ì˜ í…ìŠ¤íŠ¸ëŠ” ì •í™•ë„ ì €í•˜ ê°€ëŠ¥ |

##### êµ¬í˜„ ìš°ì„ ìˆœìœ„ ì œì•ˆ

**Phase 1 (MVP)** - ì‹¤í˜„ ê°€ëŠ¥ì„± 90%
- ê°™ì€ ë„ë©”ì¸ ì´ë¯¸ì§€ë§Œ ì§€ì›
- ë‹¨ìˆœ í…ìŠ¤íŠ¸ ì¶”ì¶œ + ë²ˆì—­ ê²°ê³¼ íŒì—… í‘œì‹œ

**Phase 2 (ê³ ê¸‰)** - ì‹¤í˜„ ê°€ëŠ¥ì„± 60%
- ì™¸ë¶€ ì´ë¯¸ì§€ ì§€ì› (background scriptë¡œ fetch)
- ì´ë¯¸ì§€ ìœ„ì— ë²ˆì—­ í…ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´

**Phase 3 (ì™„ì„±)** - ì‹¤í˜„ ê°€ëŠ¥ì„± 40%
- ì‹¤ì‹œê°„ ì´ë¯¸ì§€ ë‚´ í…ìŠ¤íŠ¸ ëŒ€ì²´
- ë§Œí™”/ì›¹íˆ° ë²ˆì—­ ì§€ì›

##### ì°¸ê³  ìë£Œ
- [PaddleOCR](https://github.com/PaddlePaddle/PaddleOCR) - ì›ë³¸ í”„ë¡œì íŠ¸
- [@gutenye/ocr](https://github.com/gutenye/ocr) - ë¸Œë¼ìš°ì €ìš© JS ë¼ì´ë¸ŒëŸ¬ë¦¬
- [paddleocr-browser](https://github.com/xulihang/paddleocr-browser) - ë¸Œë¼ìš°ì € ë°ëª¨
- [ImageTrans Chrome Extension](https://github.com/xulihang/ImageTrans_chrome_extension) - ìœ ì‚¬ êµ¬í˜„ ì°¸ê³ 
- [Copyfish](https://github.com/A9T9/Copyfish) - ì˜¤í”ˆì†ŒìŠ¤ OCR í™•ì¥

##### ê²°ë¡ 
**ê°€ë³ê²Œ êµ¬í˜„ ê°€ëŠ¥í•œê°€?** â†’ **ì•„ë‹ˆì˜¤**, í•˜ì§€ë§Œ **ì¶©ë¶„íˆ ì‹¤í˜„ ê°€ëŠ¥**

- "ê°€ë³ê²Œ"ëŠ” ì–´ë µë‹¤: ëª¨ë¸ ë¡œë”©, CORS ì²˜ë¦¬, ë©”ëª¨ë¦¬ ê´€ë¦¬ ë“± ê³ ë ¤ì‚¬í•­ ë§ìŒ
- í•˜ì§€ë§Œ ì´ë¯¸ ê²€ì¦ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì´ ìˆì–´ ë°”ë‹¥ë¶€í„° ë§Œë“¤ í•„ìš” ì—†ìŒ
- MVP ìˆ˜ì¤€ì´ë¼ë©´ 1-2ì£¼ ë‚´ êµ¬í˜„ ê°€ëŠ¥
- ì™„ì„±ë„ ë†’ì€ ë²„ì „ì€ 1-2ë‹¬ ì˜ˆìƒ
